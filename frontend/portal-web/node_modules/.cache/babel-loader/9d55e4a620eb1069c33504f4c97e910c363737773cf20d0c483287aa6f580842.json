{"ast":null,"code":"import _objectSpread from\"C:/Users/Asus/Documents/GitHub/proyecto-3-arquitectura/frontend/portal-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{Box,Typography,Card,CardContent,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Chip,Alert,Snackbar,CircularProgress,TextField,FormControl,InputLabel,Select,MenuItem,IconButton,Tooltip,Stack,Divider,Dialog,DialogTitle,DialogContent,DialogActions,Button}from'@mui/material';import{Notifications as NotificationsIcon,Search as SearchIcon,FilterList as FilterListIcon,Visibility as VisibilityIcon,Refresh as RefreshIcon,Email as EmailIconSmall,Phone as PhoneIconSmall}from'@mui/icons-material';import{useApp}from'../contexts/AppContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const tiposNotificacion=[{value:'confirmacion',label:'Confirmación de Cita',color:'success'},{value:'cancelacion',label:'Cancelación de Cita',color:'error'},{value:'modificacion',label:'Modificación de Cita',color:'warning'},{value:'recordatorio',label:'Recordatorio de Cita',color:'info'},{value:'general',label:'Notificación General',color:'default'}];const canalesNotificacion=[{value:'EMAIL',label:'Email',icon:EmailIconSmall},{value:'SMS',label:'SMS',icon:PhoneIconSmall}];const estadosNotificacion=[{value:'PENDIENTE',label:'Pendiente',color:'warning'},{value:'ENVIADA',label:'Enviada',color:'success'},{value:'ERROR',label:'Error',color:'error'}];export default function Notificaciones(){const{state,dispatch}=useApp();const[loading,setLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[tipoFilter,setTipoFilter]=useState('');const[canalFilter,setCanalFilter]=useState('');const[estadoFilter,setEstadoFilter]=useState('');const[snackbar,setSnackbar]=useState({open:false,message:'',severity:'success'});const[openDetailDialog,setOpenDetailDialog]=useState(false);const[selectedNotificacion,setSelectedNotificacion]=useState(null);// Mock data para notificaciones (en un sistema real vendría del backend)\nconst[notificaciones,setNotificaciones]=useState([{id:1,tipo:'confirmacion',mensaje:'Su cita con el Dr. Carlos Rodríguez ha sido confirmada para el 15 de Enero de 2024 a las 10:00',destinatario:'juan.perez@email.com',canal:'EMAIL',estado:'ENVIADA',createdAt:new Date().toISOString(),pacienteId:1,medicoId:1,turnoId:1,detalles:{fecha:'2024-01-15',hora:'10:00',especialidad:'Cardiología',motivo:'Control cardiológico'}},{id:2,tipo:'recordatorio',mensaje:'Recordatorio: Su cita es mañana a las 10:00. Por favor confirme su asistencia.',destinatario:'+5491112345678',canal:'SMS',estado:'PENDIENTE',createdAt:new Date(Date.now()-86400000).toISOString(),pacienteId:1,medicoId:1,turnoId:1,detalles:{fecha:'2024-01-15',hora:'10:00',especialidad:'Cardiología'}},{id:3,tipo:'cancelacion',mensaje:'Su cita del 20 de Enero ha sido cancelada. Motivo: Cambio de horario solicitado por el médico.',destinatario:'juan.perez@email.com',canal:'EMAIL',estado:'ENVIADA',createdAt:new Date(Date.now()-172800000).toISOString(),pacienteId:1,medicoId:1,turnoId:2,detalles:{fecha:'2024-01-20',hora:'14:00',motivoCancelacion:'Cambio de horario solicitado por el médico'}}]);const loadNotificaciones=useCallback(async()=>{try{setLoading(true);// En un sistema real, aquí se haría la llamada al servicio\n// const notifs = await notificacionesService.getAllNotificaciones();\n// setNotificaciones(notifs);\n// Simulamos un delay para mostrar el loading\nawait new Promise(resolve=>setTimeout(resolve,1000));// Por ahora usamos los datos mock\ndispatch({type:'SET_NOTIFICACIONES',payload:notificaciones});}catch(error){showSnackbar('Error al cargar notificaciones','error');}finally{setLoading(false);}},[]);useEffect(()=>{loadNotificaciones();},[loadNotificaciones]);const showSnackbar=(message,severity)=>{setSnackbar({open:true,message,severity});};const getTipoLabel=tipo=>{const tipoObj=tiposNotificacion.find(t=>t.value===tipo);return tipoObj?tipoObj.label:tipo;};const getTipoColor=tipo=>{const tipoObj=tiposNotificacion.find(t=>t.value===tipo);return tipoObj?tipoObj.color:'default';};const getCanalIcon=canal=>{const canalObj=canalesNotificacion.find(c=>c.value===canal);return canalObj?canalObj.icon:EmailIconSmall;};const getCanalLabel=canal=>{const canalObj=canalesNotificacion.find(c=>c.value===canal);return canalObj?canalObj.label:canal;};const getEstadoColor=estado=>{const estadoObj=estadosNotificacion.find(e=>e.value===estado);return estadoObj?estadoObj.color:'default';};const getEstadoLabel=estado=>{const estadoObj=estadosNotificacion.find(e=>e.value===estado);return estadoObj?estadoObj.label:estado;};const getPacienteNombre=pacienteId=>{if(!pacienteId)return'N/A';const paciente=state.pacientes.find(p=>p.id===pacienteId);return paciente?\"\".concat(paciente.nombre,\" \").concat(paciente.apellido):'N/A';};const getMedicoNombre=medicoId=>{if(!medicoId)return'N/A';const medico=state.medicos.find(m=>m.id===medicoId);return medico?\"Dr. \".concat(medico.nombre,\" \").concat(medico.apellido):'N/A';};const filteredNotificaciones=notificaciones.filter(notif=>{const matchesSearch=notif.mensaje.toLowerCase().includes(searchTerm.toLowerCase())||notif.destinatario.toLowerCase().includes(searchTerm.toLowerCase())||getTipoLabel(notif.tipo).toLowerCase().includes(searchTerm.toLowerCase());const matchesTipo=tipoFilter===''||notif.tipo===tipoFilter;const matchesCanal=canalFilter===''||notif.canal===canalFilter;const matchesEstado=estadoFilter===''||notif.estado===estadoFilter;return matchesSearch&&matchesTipo&&matchesCanal&&matchesEstado;});const getEstadisticasNotificaciones=()=>{const total=notificaciones.length;const pendientes=notificaciones.filter(n=>n.estado==='PENDIENTE').length;const enviadas=notificaciones.filter(n=>n.estado==='ENVIADA').length;const errores=notificaciones.filter(n=>n.estado==='ERROR').length;const emails=notificaciones.filter(n=>n.canal==='EMAIL').length;const sms=notificaciones.filter(n=>n.canal==='SMS').length;return{total,pendientes,enviadas,errores,emails,sms};};const stats=getEstadisticasNotificaciones();const handleVerDetalle=notificacion=>{setSelectedNotificacion(notificacion);setOpenDetailDialog(true);};const handleReenviar=async notificacion=>{try{setLoading(true);// En un sistema real, aquí se haría la llamada al servicio\n// await notificacionesService.reenviarNotificacion(notificacion.id);\n// Simulamos el reenvío\nawait new Promise(resolve=>setTimeout(resolve,1000));// Actualizamos el estado local\nconst notifsActualizadas=notificaciones.map(n=>n.id===notificacion.id?_objectSpread(_objectSpread({},n),{},{estado:'PENDIENTE',createdAt:new Date().toISOString()}):n);setNotificaciones(notifsActualizadas);showSnackbar('Notificación enviada para reenvío','success');}catch(error){showSnackbar('Error al reenviar notificación','error');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(NotificationsIcon,{color:\"primary\"}),\"Sistema de Notificaciones\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:loadNotificaciones,disabled:loading,children:\"Actualizar\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:2,mb:3},children:[/*#__PURE__*/_jsx(Card,{sx:{textAlign:'center',bgcolor:'primary.light',color:'white',minWidth:120,flex:1},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:stats.total}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Total\"})]})}),/*#__PURE__*/_jsx(Card,{sx:{textAlign:'center',bgcolor:'warning.light',color:'white',minWidth:120,flex:1},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:stats.pendientes}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Pendientes\"})]})}),/*#__PURE__*/_jsx(Card,{sx:{textAlign:'center',bgcolor:'success.light',color:'white',minWidth:120,flex:1},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:stats.enviadas}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Enviadas\"})]})}),/*#__PURE__*/_jsx(Card,{sx:{textAlign:'center',bgcolor:'error.light',color:'white',minWidth:120,flex:1},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:stats.errores}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Errores\"})]})}),/*#__PURE__*/_jsx(Card,{sx:{textAlign:'center',bgcolor:'info.light',color:'white',minWidth:120,flex:1},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:stats.emails}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Emails\"})]})}),/*#__PURE__*/_jsx(Card,{sx:{textAlign:'center',bgcolor:'secondary.light',color:'white',minWidth:120,flex:1},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:stats.sms}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"SMS\"})]})})]}),/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:2,alignItems:'center'},children:[/*#__PURE__*/_jsx(TextField,{placeholder:\"Buscar por mensaje, destinatario o tipo...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(SearchIcon,{sx:{mr:1,color:'text.secondary'}})},sx:{flex:1,minWidth:300}}),/*#__PURE__*/_jsxs(FormControl,{sx:{minWidth:150},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Tipo\"}),/*#__PURE__*/_jsxs(Select,{value:tipoFilter,label:\"Tipo\",onChange:e=>setTipoFilter(e.target.value),startAdornment:/*#__PURE__*/_jsx(FilterListIcon,{sx:{mr:1,color:'text.secondary'}}),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Todos los tipos\"}),tiposNotificacion.map(tipo=>/*#__PURE__*/_jsx(MenuItem,{value:tipo.value,children:tipo.label},tipo.value))]})]}),/*#__PURE__*/_jsxs(FormControl,{sx:{minWidth:120},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Canal\"}),/*#__PURE__*/_jsxs(Select,{value:canalFilter,label:\"Canal\",onChange:e=>setCanalFilter(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Todos\"}),canalesNotificacion.map(canal=>/*#__PURE__*/_jsx(MenuItem,{value:canal.value,children:canal.label},canal.value))]})]}),/*#__PURE__*/_jsxs(FormControl,{sx:{minWidth:120},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Estado\"}),/*#__PURE__*/_jsxs(Select,{value:estadoFilter,label:\"Estado\",onChange:e=>setEstadoFilter(e.target.value),children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Todos\"}),estadosNotificacion.map(estado=>/*#__PURE__*/_jsx(MenuItem,{value:estado.value,children:estado.label},estado.value))]})]})]})})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,elevation:2,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{sx:{bgcolor:'primary.main'},children:[/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"Tipo\"}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"Canal\"}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"Destinatario\"}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"Estado\"}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"Fecha\"}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'white',fontWeight:'bold'},children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsxs(TableCell,{colSpan:7,align:\"center\",sx:{py:4},children:[/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mt:1},children:\"Cargando notificaciones...\"})]})}):filteredNotificaciones.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:7,align:\"center\",sx:{py:4},children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:searchTerm||tipoFilter||canalFilter||estadoFilter?'No se encontraron notificaciones con los filtros aplicados':'No hay notificaciones registradas'})})}):filteredNotificaciones.map(notif=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:\"#\".concat(notif.id),size:\"small\",color:\"primary\",icon:/*#__PURE__*/_jsx(NotificationsIcon,{})})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:getTipoLabel(notif.tipo),color:getTipoColor(notif.tipo),size:\"small\",variant:\"filled\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",spacing:1,children:[/*#__PURE__*/React.createElement(getCanalIcon(notif.canal),{color:'action',fontSize:'small'}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:getCanalLabel(notif.canal)})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",noWrap:true,sx:{maxWidth:200},children:notif.destinatario})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:getEstadoLabel(notif.estado),color:getEstadoColor(notif.estado),size:\"small\",variant:\"filled\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:new Date(notif.createdAt).toLocaleDateString('es-ES',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'})})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:0.5},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Ver Detalle\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleVerDetalle(notif),color:\"primary\",children:/*#__PURE__*/_jsx(VisibilityIcon,{})})}),notif.estado==='ERROR'&&/*#__PURE__*/_jsx(Tooltip,{title:\"Reenviar\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleReenviar(notif),color:\"warning\",disabled:loading,children:/*#__PURE__*/_jsx(RefreshIcon,{})})})]})})]},notif.id))})]})})})}),/*#__PURE__*/_jsxs(Dialog,{open:openDetailDialog,onClose:()=>setOpenDetailDialog(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",spacing:1,children:[/*#__PURE__*/_jsx(NotificationsIcon,{color:\"primary\"}),\"Detalle de Notificaci\\xF3n\"]})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(DialogContent,{children:selectedNotificacion&&/*#__PURE__*/_jsx(Box,{sx:{mt:1},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"ID\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:2},children:[\"#\",selectedNotificacion.id]})]}),/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Tipo\"}),/*#__PURE__*/_jsx(Chip,{label:getTipoLabel(selectedNotificacion.tipo),color:getTipoColor(selectedNotificacion.tipo),size:\"small\",sx:{mb:2}})]}),/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Canal\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",spacing:1,sx:{mb:2},children:[/*#__PURE__*/React.createElement(getCanalIcon(selectedNotificacion.canal),{color:'action',fontSize:'small'}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:getCanalLabel(selectedNotificacion.canal)})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Estado\"}),/*#__PURE__*/_jsx(Chip,{label:getEstadoLabel(selectedNotificacion.estado),color:getEstadoColor(selectedNotificacion.estado),size:\"small\",sx:{mb:2}})]}),/*#__PURE__*/_jsxs(Box,{sx:{flex:'1 1 100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Destinatario\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:selectedNotificacion.destinatario})]}),/*#__PURE__*/_jsxs(Box,{sx:{flex:'1 1 100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Mensaje\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2,p:2,bgcolor:'grey.50',borderRadius:1},children:selectedNotificacion.mensaje})]}),selectedNotificacion.detalles&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{sx:{flex:'1 1 100%'},children:[/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mb:2},children:\"Detalles del Turno\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Paciente\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:getPacienteNombre(selectedNotificacion.pacienteId)})]}),/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"M\\xE9dico\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:getMedicoNombre(selectedNotificacion.medicoId)})]}),selectedNotificacion.detalles.fecha&&/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Fecha\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:selectedNotificacion.detalles.fecha})]}),selectedNotificacion.detalles.hora&&/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Hora\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:selectedNotificacion.detalles.hora})]}),selectedNotificacion.detalles.especialidad&&/*#__PURE__*/_jsxs(Box,{sx:{minWidth:200,flex:'1 1 200px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Especialidad\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:selectedNotificacion.detalles.especialidad})]}),selectedNotificacion.detalles.motivo&&/*#__PURE__*/_jsxs(Box,{sx:{flex:'1 1 100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Motivo\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:selectedNotificacion.detalles.motivo})]}),selectedNotificacion.detalles.motivoCancelacion&&/*#__PURE__*/_jsxs(Box,{sx:{flex:'1 1 100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Motivo de Cancelaci\\xF3n\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:2},children:selectedNotificacion.detalles.motivoCancelacion})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{flex:'1 1 100%'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"text.secondary\",children:\"Fecha de Creaci\\xF3n\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:new Date(selectedNotificacion.createdAt).toLocaleDateString('es-ES',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'})})]})]})})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(DialogActions,{sx:{p:2},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenDetailDialog(false),variant:\"outlined\",children:\"Cerrar\"}),(selectedNotificacion===null||selectedNotificacion===void 0?void 0:selectedNotificacion.estado)==='ERROR'&&/*#__PURE__*/_jsx(Button,{onClick:()=>{handleReenviar(selectedNotificacion);setOpenDetailDialog(false);},variant:\"contained\",color:\"warning\",disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):undefined,children:loading?'Reenviando...':'Reenviar'})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:6000,onClose:()=>setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false})),children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false})),severity:snackbar.severity,sx:{width:'100%'},children:snackbar.message})})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Typography","Card","CardContent","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Chip","Alert","Snackbar","CircularProgress","TextField","FormControl","InputLabel","Select","MenuItem","IconButton","Tooltip","Stack","Divider","Dialog","DialogTitle","DialogContent","DialogActions","Button","Notifications","NotificationsIcon","Search","SearchIcon","FilterList","FilterListIcon","Visibility","VisibilityIcon","Refresh","RefreshIcon","Email","EmailIconSmall","Phone","PhoneIconSmall","useApp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","tiposNotificacion","value","label","color","canalesNotificacion","icon","estadosNotificacion","Notificaciones","state","dispatch","loading","setLoading","searchTerm","setSearchTerm","tipoFilter","setTipoFilter","canalFilter","setCanalFilter","estadoFilter","setEstadoFilter","snackbar","setSnackbar","open","message","severity","openDetailDialog","setOpenDetailDialog","selectedNotificacion","setSelectedNotificacion","notificaciones","setNotificaciones","id","tipo","mensaje","destinatario","canal","estado","createdAt","Date","toISOString","pacienteId","medicoId","turnoId","detalles","fecha","hora","especialidad","motivo","now","motivoCancelacion","loadNotificaciones","Promise","resolve","setTimeout","type","payload","error","showSnackbar","getTipoLabel","tipoObj","find","t","getTipoColor","getCanalIcon","canalObj","c","getCanalLabel","getEstadoColor","estadoObj","e","getEstadoLabel","getPacienteNombre","paciente","pacientes","p","concat","nombre","apellido","getMedicoNombre","medico","medicos","m","filteredNotificaciones","filter","notif","matchesSearch","toLowerCase","includes","matchesTipo","matchesCanal","matchesEstado","getEstadisticasNotificaciones","total","length","pendientes","n","enviadas","errores","emails","sms","stats","handleVerDetalle","notificacion","handleReenviar","notifsActualizadas","map","_objectSpread","children","sx","display","justifyContent","alignItems","mb","variant","gap","startIcon","onClick","disabled","flexWrap","textAlign","bgcolor","minWidth","flex","placeholder","onChange","target","InputProps","startAdornment","mr","component","elevation","fontWeight","colSpan","align","py","mt","hover","size","direction","spacing","createElement","fontSize","noWrap","maxWidth","toLocaleDateString","day","month","year","hour","minute","title","onClose","fullWidth","borderRadius","my","weekday","undefined","autoHideDuration","width"],"sources":["C:/Users/Asus/Documents/GitHub/proyecto-3-arquitectura/frontend/portal-web/src/pages/Notificaciones.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Chip,\r\n  Alert,\r\n  Snackbar,\r\n  CircularProgress,\r\n  TextField,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  IconButton,\r\n  Tooltip,\r\n  Stack,\r\n  Divider,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n} from '@mui/material';\r\nimport {\r\n  Notifications as NotificationsIcon,\r\n\r\n  Search as SearchIcon,\r\n  FilterList as FilterListIcon,\r\n  Visibility as VisibilityIcon,\r\n  Refresh as RefreshIcon,\r\n  Email as EmailIconSmall,\r\n  Phone as PhoneIconSmall,\r\n} from '@mui/icons-material';\r\nimport { useApp } from '../contexts/AppContext';\r\n\r\ninterface Notificacion {\r\n  id: number;\r\n  tipo: string;\r\n  mensaje: string;\r\n  destinatario: string;\r\n  canal: 'EMAIL' | 'SMS';\r\n  estado: 'PENDIENTE' | 'ENVIADA' | 'ERROR';\r\n  createdAt: string;\r\n  pacienteId?: number;\r\n  medicoId?: number;\r\n  turnoId?: number;\r\n  detalles?: any;\r\n}\r\n\r\nconst tiposNotificacion = [\r\n  { value: 'confirmacion', label: 'Confirmación de Cita', color: 'success' as const },\r\n  { value: 'cancelacion', label: 'Cancelación de Cita', color: 'error' as const },\r\n  { value: 'modificacion', label: 'Modificación de Cita', color: 'warning' as const },\r\n  { value: 'recordatorio', label: 'Recordatorio de Cita', color: 'info' as const },\r\n  { value: 'general', label: 'Notificación General', color: 'default' as const },\r\n];\r\n\r\nconst canalesNotificacion = [\r\n  { value: 'EMAIL', label: 'Email', icon: EmailIconSmall },\r\n  { value: 'SMS', label: 'SMS', icon: PhoneIconSmall },\r\n];\r\n\r\nconst estadosNotificacion = [\r\n  { value: 'PENDIENTE', label: 'Pendiente', color: 'warning' as const },\r\n  { value: 'ENVIADA', label: 'Enviada', color: 'success' as const },\r\n  { value: 'ERROR', label: 'Error', color: 'error' as const },\r\n];\r\n\r\nexport default function Notificaciones() {\r\n  const { state, dispatch } = useApp();\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [tipoFilter, setTipoFilter] = useState('');\r\n  const [canalFilter, setCanalFilter] = useState('');\r\n  const [estadoFilter, setEstadoFilter] = useState('');\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' as 'success' | 'error' });\r\n  const [openDetailDialog, setOpenDetailDialog] = useState(false);\r\n  const [selectedNotificacion, setSelectedNotificacion] = useState<Notificacion | null>(null);\r\n\r\n  // Mock data para notificaciones (en un sistema real vendría del backend)\r\n  const [notificaciones, setNotificaciones] = useState<Notificacion[]>([\r\n    {\r\n      id: 1,\r\n      tipo: 'confirmacion',\r\n      mensaje: 'Su cita con el Dr. Carlos Rodríguez ha sido confirmada para el 15 de Enero de 2024 a las 10:00',\r\n      destinatario: 'juan.perez@email.com',\r\n      canal: 'EMAIL',\r\n      estado: 'ENVIADA',\r\n      createdAt: new Date().toISOString(),\r\n      pacienteId: 1,\r\n      medicoId: 1,\r\n      turnoId: 1,\r\n      detalles: {\r\n        fecha: '2024-01-15',\r\n        hora: '10:00',\r\n        especialidad: 'Cardiología',\r\n        motivo: 'Control cardiológico'\r\n      }\r\n    },\r\n    {\r\n      id: 2,\r\n      tipo: 'recordatorio',\r\n      mensaje: 'Recordatorio: Su cita es mañana a las 10:00. Por favor confirme su asistencia.',\r\n      destinatario: '+5491112345678',\r\n      canal: 'SMS',\r\n      estado: 'PENDIENTE',\r\n      createdAt: new Date(Date.now() - 86400000).toISOString(),\r\n      pacienteId: 1,\r\n      medicoId: 1,\r\n      turnoId: 1,\r\n      detalles: {\r\n        fecha: '2024-01-15',\r\n        hora: '10:00',\r\n        especialidad: 'Cardiología'\r\n      }\r\n    },\r\n    {\r\n      id: 3,\r\n      tipo: 'cancelacion',\r\n      mensaje: 'Su cita del 20 de Enero ha sido cancelada. Motivo: Cambio de horario solicitado por el médico.',\r\n      destinatario: 'juan.perez@email.com',\r\n      canal: 'EMAIL',\r\n      estado: 'ENVIADA',\r\n      createdAt: new Date(Date.now() - 172800000).toISOString(),\r\n      pacienteId: 1,\r\n      medicoId: 1,\r\n      turnoId: 2,\r\n      detalles: {\r\n        fecha: '2024-01-20',\r\n        hora: '14:00',\r\n        motivoCancelacion: 'Cambio de horario solicitado por el médico'\r\n      }\r\n    }\r\n  ]);\r\n\r\n  const loadNotificaciones = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      // En un sistema real, aquí se haría la llamada al servicio\r\n      // const notifs = await notificacionesService.getAllNotificaciones();\r\n      // setNotificaciones(notifs);\r\n      \r\n      // Simulamos un delay para mostrar el loading\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Por ahora usamos los datos mock\r\n      dispatch({ type: 'SET_NOTIFICACIONES', payload: notificaciones });\r\n    } catch (error) {\r\n      showSnackbar('Error al cargar notificaciones', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadNotificaciones();\r\n  }, [loadNotificaciones]);\r\n\r\n  const showSnackbar = (message: string, severity: 'success' | 'error') => {\r\n    setSnackbar({ open: true, message, severity });\r\n  };\r\n\r\n  const getTipoLabel = (tipo: string) => {\r\n    const tipoObj = tiposNotificacion.find(t => t.value === tipo);\r\n    return tipoObj ? tipoObj.label : tipo;\r\n  };\r\n\r\n  const getTipoColor = (tipo: string) => {\r\n    const tipoObj = tiposNotificacion.find(t => t.value === tipo);\r\n    return tipoObj ? tipoObj.color : 'default';\r\n  };\r\n\r\n  const getCanalIcon = (canal: string) => {\r\n    const canalObj = canalesNotificacion.find(c => c.value === canal);\r\n    return canalObj ? canalObj.icon : EmailIconSmall;\r\n  };\r\n\r\n  const getCanalLabel = (canal: string) => {\r\n    const canalObj = canalesNotificacion.find(c => c.value === canal);\r\n    return canalObj ? canalObj.label : canal;\r\n  };\r\n\r\n  const getEstadoColor = (estado: string) => {\r\n    const estadoObj = estadosNotificacion.find(e => e.value === estado);\r\n    return estadoObj ? estadoObj.color : 'default';\r\n  };\r\n\r\n  const getEstadoLabel = (estado: string) => {\r\n    const estadoObj = estadosNotificacion.find(e => e.value === estado);\r\n    return estadoObj ? estadoObj.label : estado;\r\n  };\r\n\r\n  const getPacienteNombre = (pacienteId?: number): string => {\r\n    if (!pacienteId) return 'N/A';\r\n    const paciente = state.pacientes.find(p => p.id === pacienteId);\r\n    return paciente ? `${paciente.nombre} ${paciente.apellido}` : 'N/A';\r\n  };\r\n\r\n  const getMedicoNombre = (medicoId?: number): string => {\r\n    if (!medicoId) return 'N/A';\r\n    const medico = state.medicos.find(m => m.id === medicoId);\r\n    return medico ? `Dr. ${medico.nombre} ${medico.apellido}` : 'N/A';\r\n  };\r\n\r\n  const filteredNotificaciones = notificaciones.filter(notif => {\r\n    const matchesSearch = \r\n      notif.mensaje.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      notif.destinatario.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      getTipoLabel(notif.tipo).toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesTipo = tipoFilter === '' || notif.tipo === tipoFilter;\r\n    const matchesCanal = canalFilter === '' || notif.canal === canalFilter;\r\n    const matchesEstado = estadoFilter === '' || notif.estado === estadoFilter;\r\n    \r\n    return matchesSearch && matchesTipo && matchesCanal && matchesEstado;\r\n  });\r\n\r\n  const getEstadisticasNotificaciones = () => {\r\n    const total = notificaciones.length;\r\n    const pendientes = notificaciones.filter(n => n.estado === 'PENDIENTE').length;\r\n    const enviadas = notificaciones.filter(n => n.estado === 'ENVIADA').length;\r\n    const errores = notificaciones.filter(n => n.estado === 'ERROR').length;\r\n    const emails = notificaciones.filter(n => n.canal === 'EMAIL').length;\r\n    const sms = notificaciones.filter(n => n.canal === 'SMS').length;\r\n    \r\n    return { total, pendientes, enviadas, errores, emails, sms };\r\n  };\r\n\r\n  const stats = getEstadisticasNotificaciones();\r\n\r\n  const handleVerDetalle = (notificacion: Notificacion) => {\r\n    setSelectedNotificacion(notificacion);\r\n    setOpenDetailDialog(true);\r\n  };\r\n\r\n  const handleReenviar = async (notificacion: Notificacion) => {\r\n    try {\r\n      setLoading(true);\r\n      // En un sistema real, aquí se haría la llamada al servicio\r\n      // await notificacionesService.reenviarNotificacion(notificacion.id);\r\n      \r\n      // Simulamos el reenvío\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Actualizamos el estado local\r\n      const notifsActualizadas = notificaciones.map(n => \r\n        n.id === notificacion.id \r\n          ? { ...n, estado: 'PENDIENTE' as const, createdAt: new Date().toISOString() }\r\n          : n\r\n      );\r\n      setNotificaciones(notifsActualizadas);\r\n      \r\n      showSnackbar('Notificación enviada para reenvío', 'success');\r\n    } catch (error) {\r\n      showSnackbar('Error al reenviar notificación', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      {/* Header */}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\r\n        <Typography variant=\"h4\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <NotificationsIcon color=\"primary\" />\r\n          Sistema de Notificaciones\r\n        </Typography>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<RefreshIcon />}\r\n          onClick={loadNotificaciones}\r\n          disabled={loading}\r\n        >\r\n          Actualizar\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Estadísticas */}\r\n      <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, mb: 3 }}>\r\n        <Card sx={{ textAlign: 'center', bgcolor: 'primary.light', color: 'white', minWidth: 120, flex: 1 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">{stats.total}</Typography>\r\n            <Typography variant=\"body2\">Total</Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card sx={{ textAlign: 'center', bgcolor: 'warning.light', color: 'white', minWidth: 120, flex: 1 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">{stats.pendientes}</Typography>\r\n            <Typography variant=\"body2\">Pendientes</Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card sx={{ textAlign: 'center', bgcolor: 'success.light', color: 'white', minWidth: 120, flex: 1 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">{stats.enviadas}</Typography>\r\n            <Typography variant=\"body2\">Enviadas</Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card sx={{ textAlign: 'center', bgcolor: 'error.light', color: 'white', minWidth: 120, flex: 1 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">{stats.errores}</Typography>\r\n            <Typography variant=\"body2\">Errores</Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card sx={{ textAlign: 'center', bgcolor: 'info.light', color: 'white', minWidth: 120, flex: 1 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">{stats.emails}</Typography>\r\n            <Typography variant=\"body2\">Emails</Typography>\r\n          </CardContent>\r\n        </Card>\r\n        <Card sx={{ textAlign: 'center', bgcolor: 'secondary.light', color: 'white', minWidth: 120, flex: 1 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\">{stats.sms}</Typography>\r\n            <Typography variant=\"body2\">SMS</Typography>\r\n          </CardContent>\r\n        </Card>\r\n      </Box>\r\n\r\n      {/* Filtros */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, alignItems: 'center' }}>\r\n            <TextField\r\n              placeholder=\"Buscar por mensaje, destinatario o tipo...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: <SearchIcon sx={{ mr: 1, color: 'text.secondary' }} />,\r\n              }}\r\n              sx={{ flex: 1, minWidth: 300 }}\r\n            />\r\n            <FormControl sx={{ minWidth: 150 }}>\r\n              <InputLabel>Tipo</InputLabel>\r\n              <Select\r\n                value={tipoFilter}\r\n                label=\"Tipo\"\r\n                onChange={(e) => setTipoFilter(e.target.value)}\r\n                startAdornment={<FilterListIcon sx={{ mr: 1, color: 'text.secondary' }} />}\r\n              >\r\n                <MenuItem value=\"\">Todos los tipos</MenuItem>\r\n                {tiposNotificacion.map((tipo) => (\r\n                  <MenuItem key={tipo.value} value={tipo.value}>\r\n                    {tipo.label}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            <FormControl sx={{ minWidth: 120 }}>\r\n              <InputLabel>Canal</InputLabel>\r\n              <Select\r\n                value={canalFilter}\r\n                label=\"Canal\"\r\n                onChange={(e) => setCanalFilter(e.target.value)}\r\n              >\r\n                <MenuItem value=\"\">Todos</MenuItem>\r\n                {canalesNotificacion.map((canal) => (\r\n                  <MenuItem key={canal.value} value={canal.value}>\r\n                    {canal.label}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n            <FormControl sx={{ minWidth: 120 }}>\r\n              <InputLabel>Estado</InputLabel>\r\n              <Select\r\n                value={estadoFilter}\r\n                label=\"Estado\"\r\n                onChange={(e) => setEstadoFilter(e.target.value)}\r\n              >\r\n                <MenuItem value=\"\">Todos</MenuItem>\r\n                {estadosNotificacion.map((estado) => (\r\n                  <MenuItem key={estado.value} value={estado.value}>\r\n                    {estado.label}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Tabla de notificaciones */}\r\n      <Card>\r\n        <CardContent>\r\n          <TableContainer component={Paper} elevation={2}>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow sx={{ bgcolor: 'primary.main' }}>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>ID</TableCell>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>Tipo</TableCell>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>Canal</TableCell>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>Destinatario</TableCell>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>Estado</TableCell>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>Fecha</TableCell>\r\n                  <TableCell sx={{ color: 'white', fontWeight: 'bold' }}>Acciones</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {loading ? (\r\n                  <TableRow>\r\n                    <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\r\n                      <CircularProgress />\r\n                      <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                        Cargando notificaciones...\r\n                      </Typography>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : filteredNotificaciones.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\r\n                      <Typography variant=\"body1\" color=\"text.secondary\">\r\n                        {searchTerm || tipoFilter || canalFilter || estadoFilter \r\n                          ? 'No se encontraron notificaciones con los filtros aplicados' \r\n                          : 'No hay notificaciones registradas'}\r\n                      </Typography>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  filteredNotificaciones.map((notif) => (\r\n                    <TableRow key={notif.id} hover>\r\n                      <TableCell>\r\n                        <Chip \r\n                          label={`#${notif.id}`} \r\n                          size=\"small\" \r\n                          color=\"primary\"\r\n                          icon={<NotificationsIcon />}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Chip\r\n                          label={getTipoLabel(notif.tipo)}\r\n                          color={getTipoColor(notif.tipo)}\r\n                          size=\"small\"\r\n                          variant=\"filled\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n                          {React.createElement(getCanalIcon(notif.canal), { \r\n                            color: 'action', \r\n                            fontSize: 'small' \r\n                          })}\r\n                          <Typography variant=\"body2\">\r\n                            {getCanalLabel(notif.canal)}\r\n                          </Typography>\r\n                        </Stack>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\" noWrap sx={{ maxWidth: 200 }}>\r\n                          {notif.destinatario}\r\n                        </Typography>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Chip\r\n                          label={getEstadoLabel(notif.estado)}\r\n                          color={getEstadoColor(notif.estado)}\r\n                          size=\"small\"\r\n                          variant=\"filled\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Typography variant=\"body2\">\r\n                          {new Date(notif.createdAt).toLocaleDateString('es-ES', {\r\n                            day: '2-digit',\r\n                            month: '2-digit',\r\n                            year: 'numeric',\r\n                            hour: '2-digit',\r\n                            minute: '2-digit'\r\n                          })}\r\n                        </Typography>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Box sx={{ display: 'flex', gap: 0.5 }}>\r\n                          <Tooltip title=\"Ver Detalle\">\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              onClick={() => handleVerDetalle(notif)}\r\n                              color=\"primary\"\r\n                            >\r\n                              <VisibilityIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                          \r\n                          {notif.estado === 'ERROR' && (\r\n                            <Tooltip title=\"Reenviar\">\r\n                              <IconButton\r\n                                size=\"small\"\r\n                                onClick={() => handleReenviar(notif)}\r\n                                color=\"warning\"\r\n                                disabled={loading}\r\n                              >\r\n                                <RefreshIcon />\r\n                              </IconButton>\r\n                            </Tooltip>\r\n                          )}\r\n                        </Box>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Diálogo de detalle */}\r\n      <Dialog open={openDetailDialog} onClose={() => setOpenDetailDialog(false)} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>\r\n          <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\r\n            <NotificationsIcon color=\"primary\" />\r\n            Detalle de Notificación\r\n          </Stack>\r\n        </DialogTitle>\r\n        <Divider />\r\n                 <DialogContent>\r\n           {selectedNotificacion && (\r\n             <Box sx={{ mt: 1 }}>\r\n               <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2 }}>\r\n                 <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">ID</Typography>\r\n                   <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                     #{selectedNotificacion.id}\r\n                   </Typography>\r\n                 </Box>\r\n                 <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">Tipo</Typography>\r\n                   <Chip\r\n                     label={getTipoLabel(selectedNotificacion.tipo)}\r\n                     color={getTipoColor(selectedNotificacion.tipo)}\r\n                     size=\"small\"\r\n                     sx={{ mb: 2 }}\r\n                   />\r\n                 </Box>\r\n                 <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">Canal</Typography>\r\n                   <Stack direction=\"row\" alignItems=\"center\" spacing={1} sx={{ mb: 2 }}>\r\n                     {React.createElement(getCanalIcon(selectedNotificacion.canal), { \r\n                       color: 'action', \r\n                       fontSize: 'small' \r\n                     })}\r\n                     <Typography variant=\"body1\">\r\n                       {getCanalLabel(selectedNotificacion.canal)}\r\n                     </Typography>\r\n                   </Stack>\r\n                 </Box>\r\n                 <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">Estado</Typography>\r\n                   <Chip\r\n                     label={getEstadoLabel(selectedNotificacion.estado)}\r\n                     color={getEstadoColor(selectedNotificacion.estado)}\r\n                     size=\"small\"\r\n                     sx={{ mb: 2 }}\r\n                   />\r\n                 </Box>\r\n                 <Box sx={{ flex: '1 1 100%' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">Destinatario</Typography>\r\n                   <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                     {selectedNotificacion.destinatario}\r\n                   </Typography>\r\n                 </Box>\r\n                 <Box sx={{ flex: '1 1 100%' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">Mensaje</Typography>\r\n                   <Typography variant=\"body1\" sx={{ mb: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\r\n                     {selectedNotificacion.mensaje}\r\n                   </Typography>\r\n                 </Box>\r\n                 \r\n                 {selectedNotificacion.detalles && (\r\n                   <>\r\n                     <Box sx={{ flex: '1 1 100%' }}>\r\n                       <Divider sx={{ my: 2 }} />\r\n                       <Typography variant=\"h6\" sx={{ mb: 2 }}>Detalles del Turno</Typography>\r\n                     </Box>\r\n                     <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                       <Typography variant=\"subtitle2\" color=\"text.secondary\">Paciente</Typography>\r\n                       <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                         {getPacienteNombre(selectedNotificacion.pacienteId)}\r\n                       </Typography>\r\n                     </Box>\r\n                     <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                       <Typography variant=\"subtitle2\" color=\"text.secondary\">Médico</Typography>\r\n                       <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                         {getMedicoNombre(selectedNotificacion.medicoId)}\r\n                       </Typography>\r\n                     </Box>\r\n                     {selectedNotificacion.detalles.fecha && (\r\n                       <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                         <Typography variant=\"subtitle2\" color=\"text.secondary\">Fecha</Typography>\r\n                         <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                           {selectedNotificacion.detalles.fecha}\r\n                         </Typography>\r\n                       </Box>\r\n                     )}\r\n                     {selectedNotificacion.detalles.hora && (\r\n                       <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                         <Typography variant=\"subtitle2\" color=\"text.secondary\">Hora</Typography>\r\n                         <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                           {selectedNotificacion.detalles.hora}\r\n                         </Typography>\r\n                       </Box>\r\n                     )}\r\n                     {selectedNotificacion.detalles.especialidad && (\r\n                       <Box sx={{ minWidth: 200, flex: '1 1 200px' }}>\r\n                         <Typography variant=\"subtitle2\" color=\"text.secondary\">Especialidad</Typography>\r\n                         <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                           {selectedNotificacion.detalles.especialidad}\r\n                         </Typography>\r\n                       </Box>\r\n                     )}\r\n                     {selectedNotificacion.detalles.motivo && (\r\n                       <Box sx={{ flex: '1 1 100%' }}>\r\n                         <Typography variant=\"subtitle2\" color=\"text.secondary\">Motivo</Typography>\r\n                         <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                           {selectedNotificacion.detalles.motivo}\r\n                         </Typography>\r\n                       </Box>\r\n                     )}\r\n                     {selectedNotificacion.detalles.motivoCancelacion && (\r\n                       <Box sx={{ flex: '1 1 100%' }}>\r\n                         <Typography variant=\"subtitle2\" color=\"text.secondary\">Motivo de Cancelación</Typography>\r\n                         <Typography variant=\"body1\" sx={{ mb: 2 }}>\r\n                           {selectedNotificacion.detalles.motivoCancelacion}\r\n                         </Typography>\r\n                       </Box>\r\n                     )}\r\n                   </>\r\n                 )}\r\n                 \r\n                 <Box sx={{ flex: '1 1 100%' }}>\r\n                   <Typography variant=\"subtitle2\" color=\"text.secondary\">Fecha de Creación</Typography>\r\n                   <Typography variant=\"body1\">\r\n                     {new Date(selectedNotificacion.createdAt).toLocaleDateString('es-ES', {\r\n                       weekday: 'long',\r\n                       year: 'numeric',\r\n                       month: 'long',\r\n                       day: 'numeric',\r\n                       hour: '2-digit',\r\n                       minute: '2-digit'\r\n                     })}\r\n                   </Typography>\r\n                 </Box>\r\n               </Box>\r\n             </Box>\r\n           )}\r\n         </DialogContent>\r\n        <Divider />\r\n        <DialogActions sx={{ p: 2 }}>\r\n          <Button onClick={() => setOpenDetailDialog(false)} variant=\"outlined\">\r\n            Cerrar\r\n          </Button>\r\n          {selectedNotificacion?.estado === 'ERROR' && (\r\n            <Button\r\n              onClick={() => {\r\n                handleReenviar(selectedNotificacion);\r\n                setOpenDetailDialog(false);\r\n              }}\r\n              variant=\"contained\"\r\n              color=\"warning\"\r\n              disabled={loading}\r\n              startIcon={loading ? <CircularProgress size={20} /> : undefined}\r\n            >\r\n              {loading ? 'Reenviando...' : 'Reenviar'}\r\n            </Button>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Snackbar */}\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n      >\r\n        <Alert\r\n          onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n          severity={snackbar.severity}\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}