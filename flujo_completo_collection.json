{
  "info": {
    "_postman_id": "flujo-completo-sistema-turnos",
    "name": "Flujo Completo - Sistema de Turnos M√©dicos",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "flujo-completo"
  },
  "variables": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "paciente_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "medico_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "turno_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "turno_modificado_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üîÑ FLUJO COMPLETO DEL SISTEMA",
      "item": [
        {
          "name": "0. Verificaci√≥n del Sistema",
          "item": [
            {
              "name": "Health Check - API Gateway",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/health"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Gateway funcionando', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "});",
                      "console.log('‚úÖ API Gateway funcionando correctamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Health Check - Pacientes Service",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/pacientes/health"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Pacientes Service funcionando', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "});",
                      "console.log('‚úÖ Pacientes Service funcionando correctamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Health Check - M√©dicos Service",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/medicos/health"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('M√©dicos Service funcionando', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "});",
                      "console.log('‚úÖ M√©dicos Service funcionando correctamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Health Check - Agendamiento Service",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/agendamiento/health"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Agendamiento Service funcionando', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "});",
                      "console.log('‚úÖ Agendamiento Service funcionando correctamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Health Check - Notificaciones Service",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/notificaciones/health"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Notificaciones Service funcionando', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "});",
                      "console.log('‚úÖ Notificaciones Service funcionando correctamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "1. Creaci√≥n de Pacientes",
          "item": [
            {
              "name": "Crear Paciente 1 - Juan P√©rez",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"dni\": \"11111111\",\n  \"nombre\": \"Juan Carlos\",\n  \"apellido\": \"P√©rez Gonz√°lez\",\n  \"email\": \"juan.perez@email.com\",\n  \"telefono\": \"1111111111\",\n  \"fechaNacimiento\": \"1985-03-15\",\n  \"direccion\": \"Av. Corrientes 1234, CABA\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/pacientes"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Paciente 1 creado exitosamente', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.id).to.be.a('number');",
                      "    pm.collectionVariables.set('paciente_id', response.data.id);",
                      "});",
                      "console.log('‚úÖ Paciente 1 creado con ID:', pm.collectionVariables.get('paciente_id'));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Crear Paciente 2 - Mar√≠a Gonz√°lez",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"dni\": \"22222222\",\n  \"nombre\": \"Mar√≠a Elena\",\n  \"apellido\": \"Gonz√°lez Silva\",\n  \"email\": \"maria.gonzalez@email.com\",\n  \"telefono\": \"2222222222\",\n  \"fechaNacimiento\": \"1990-11-08\",\n  \"direccion\": \"Av. Belgrano 456, CABA\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/pacientes"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Paciente 2 creado exitosamente', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.id).to.be.a('number');",
                      "});",
                      "console.log('‚úÖ Paciente 2 creado exitosamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Verificar Pacientes Creados",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/pacientes"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Lista de pacientes obtenida', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "    pm.expect(response.data.length).to.be.at.least(2);",
                      "});",
                      "console.log('‚úÖ Lista de pacientes obtenida:', response.data.length, 'pacientes');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "2. Creaci√≥n de M√©dicos",
          "item": [
            {
              "name": "Crear M√©dico 1 - Dr. Rodr√≠guez",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"matricula\": \"111111\",\n  \"nombre\": \"Dr. Roberto\",\n  \"apellido\": \"Rodr√≠guez L√≥pez\",\n  \"especialidad\": \"Cardiolog√≠a\",\n  \"email\": \"roberto.rodriguez@clinica.com\",\n  \"telefono\": \"3333333333\",\n  \"fechaNacimiento\": \"1978-07-22\",\n  \"direccion\": \"Av. Callao 987, CABA\",\n  \"activo\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/medicos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('M√©dico 1 creado exitosamente', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.id).to.be.a('number');",
                      "    pm.collectionVariables.set('medico_id', response.data.id);",
                      "});",
                      "console.log('‚úÖ M√©dico 1 creado con ID:', pm.collectionVariables.get('medico_id'));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Crear M√©dico 2 - Dra. Mart√≠nez",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"matricula\": \"222222\",\n  \"nombre\": \"Dra. Ana\",\n  \"apellido\": \"Mart√≠nez Ruiz\",\n  \"especialidad\": \"Dermatolog√≠a\",\n  \"email\": \"ana.martinez@clinica.com\",\n  \"telefono\": \"4444444444\",\n  \"fechaNacimiento\": \"1982-05-14\",\n  \"direccion\": \"Av. Las Heras 789, CABA\",\n  \"activo\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/medicos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('M√©dico 2 creado exitosamente', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.id).to.be.a('number');",
                      "});",
                      "console.log('‚úÖ M√©dico 2 creado exitosamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Verificar M√©dicos Creados",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/medicos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Lista de m√©dicos obtenida', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "    pm.expect(response.data.length).to.be.at.least(2);",
                      "});",
                      "console.log('‚úÖ Lista de m√©dicos obtenida:', response.data.length, 'm√©dicos');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "3. Creaci√≥n de Turnos",
          "item": [
            {
              "name": "Crear Turno 1 - Cardiolog√≠a",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"pacienteId\": {{paciente_id}},\n  \"medicoId\": {{medico_id}},\n  \"fecha\": \"2025-08-25 09:00:00\",\n  \"hora\": \"09:00\",\n  \"diaSemana\": 1,\n  \"motivo\": \"Consulta cardiol√≥gica de rutina\",\n  \"observaciones\": \"Paciente con hipertensi√≥n, control mensual\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Turno 1 creado exitosamente', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.id).to.be.a('number');",
                      "    pm.collectionVariables.set('turno_id', response.data.id);",
                      "});",
                      "console.log('‚úÖ Turno 1 creado con ID:', pm.collectionVariables.get('turno_id'));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Crear Turno 2 - Dermatolog√≠a",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"pacienteId\": {{paciente_id}},\n  \"medicoId\": {{medico_id}},\n  \"fecha\": \"2025-08-26 14:00:00\",\n  \"hora\": \"14:00\",\n  \"diaSemana\": 2,\n  \"motivo\": \"Consulta dermatol√≥gica\",\n  \"observaciones\": \"Paciente con manchas en la piel\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Turno 2 creado exitosamente', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.id).to.be.a('number');",
                      "    pm.collectionVariables.set('turno_modificado_id', response.data.id);",
                      "});",
                      "console.log('‚úÖ Turno 2 creado con ID:', pm.collectionVariables.get('turno_modificado_id'));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Verificar Turnos Creados",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Lista de turnos obtenida', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.turnos).to.be.an('array');",
                      "    pm.expect(response.data.turnos.length).to.be.at.least(2);",
                      "});",
                      "console.log('‚úÖ Lista de turnos obtenida:', response.data.turnos.length, 'turnos');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "4. Confirmaci√≥n de Turnos (Eventos RabbitMQ)",
          "item": [
            {
              "name": "Confirmar Turno 1",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos/{{turno_id}}/confirmar"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Turno 1 confirmado exitosamente', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.estado).to.equal('CONFIRMADO');",
                      "});",
                      "console.log('‚úÖ Turno 1 confirmado - Evento RabbitMQ generado');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Confirmar Turno 2",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos/{{turno_modificado_id}}/confirmar"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Turno 2 confirmado exitosamente', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.estado).to.equal('CONFIRMADO');",
                      "});",
                      "console.log('‚úÖ Turno 2 confirmado - Evento RabbitMQ generado');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "5. Modificaci√≥n de Turnos",
          "item": [
            {
              "name": "Modificar Turno 2 - Cambiar Hora",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"hora\": \"16:00\",\n  \"motivo\": \"Consulta dermatol√≥gica - Horario modificado\",\n  \"observaciones\": \"Paciente solicit√≥ cambio de horario\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos/{{turno_modificado_id}}"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Turno 2 modificado exitosamente', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.hora).to.equal('16:00');",
                      "});",
                      "console.log('‚úÖ Turno 2 modificado - Evento RabbitMQ generado');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "6. Cancelaci√≥n de Turnos",
          "item": [
            {
              "name": "Cancelar Turno 1",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"motivo\": \"Paciente solicit√≥ cancelaci√≥n por motivos personales\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos/{{turno_id}}/cancelar"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Turno 1 cancelado exitosamente', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.estado).to.equal('CANCELADO');",
                      "});",
                      "console.log('‚úÖ Turno 1 cancelado - Evento RabbitMQ generado');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "7. Verificaci√≥n de Eventos y Notificaciones",
          "item": [
            {
              "name": "Verificar Notificaciones Generadas",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/notificaciones"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Notificaciones obtenidas', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "});",
                      "console.log('‚úÖ Notificaciones obtenidas:', response.data.length, 'notificaciones');",
                      "console.log('üìß Tipos de notificaciones:', response.data.map(n => n.tipo).join(', '));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Verificar Historial de Cambios",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/agendamiento/historial"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Historial de cambios obtenido', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.historial).to.be.an('array');",
                      "});",
                      "console.log('‚úÖ Historial de cambios obtenido:', response.data.historial.length, 'cambios');",
                      "console.log('üìù Tipos de cambios:', response.data.historial.map(h => h.tipo_cambio).join(', '));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "8. Consultas y B√∫squedas",
          "item": [
            {
              "name": "Buscar Paciente por DNI",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/pacientes/dni/11111111"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Paciente encontrado por DNI', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.dni).to.equal('11111111');",
                      "});",
                      "console.log('‚úÖ Paciente encontrado por DNI:', response.data.nombre, response.data.apellido);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Buscar M√©dico por Especialidad",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/medicos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('M√©dicos obtenidos', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "});",
                      "const cardiologos = response.data.filter(m => m.especialidad === 'Cardiolog√≠a');",
                      "const dermatologos = response.data.filter(m => m.especialidad === 'Dermatolog√≠a');",
                      "console.log('‚úÖ Cardi√≥logos encontrados:', cardiologos.length);",
                      "console.log('‚úÖ Dermat√≥logos encontrados:', dermatologos.length);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Buscar Disponibilidad del M√©dico",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/agendamiento/disponibilidad?medicoId={{medico_id}}&fecha=2025-08-25"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Disponibilidad obtenida', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.horariosDisponibles).to.be.an('array');",
                      "});",
                      "console.log('‚úÖ Horarios disponibles:', response.data.horariosDisponibles.length, 'horarios');",
                      "console.log('üïê Horarios:', response.data.horariosDisponibles.join(', '));"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "9. Verificaci√≥n Final del Sistema",
          "item": [
            {
              "name": "Estado Final - Pacientes",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/pacientes"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Estado final de pacientes verificado', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "});",
                      "console.log('üéØ ESTADO FINAL - PACIENTES:', response.data.length, 'pacientes registrados');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Estado Final - M√©dicos",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/medicos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Estado final de m√©dicos verificado', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "});",
                      "console.log('üéØ ESTADO FINAL - M√âDICOS:', response.data.length, 'm√©dicos registrados');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Estado Final - Turnos",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/agendamiento/turnos"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Estado final de turnos verificado', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.turnos).to.be.an('array');",
                      "});",
                      "const turnosConfirmados = response.data.turnos.filter(t => t.estado === 'CONFIRMADO').length;",
                      "const turnosCancelados = response.data.turnos.filter(t => t.estado === 'CANCELADO').length;",
                      "console.log('üéØ ESTADO FINAL - TURNOS:', response.data.turnos.length, 'turnos totales');",
                      "console.log('‚úÖ Turnos confirmados:', turnosConfirmados);",
                      "console.log('‚ùå Turnos cancelados:', turnosCancelados);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Estado Final - Notificaciones",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{base_url}}/notificaciones"
                }
              },
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Estado final de notificaciones verificado', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data).to.be.an('array');",
                      "});",
                      "console.log('üéØ ESTADO FINAL - NOTIFICACIONES:', response.data.length, 'notificaciones generadas');",
                      "console.log('üéâ ¬°SISTEMA COMPLETAMENTE FUNCIONAL!');",
                      "console.log('üìã Resumen del flujo:');",
                      "console.log('   ‚Ä¢ Pacientes creados y verificados');",
                      "console.log('   ‚Ä¢ M√©dicos creados y verificados');",
                      "console.log('   ‚Ä¢ Turnos creados, confirmados, modificados y cancelados');",
                      "console.log('   ‚Ä¢ Eventos RabbitMQ generados correctamente');",
                      "console.log('   ‚Ä¢ Notificaciones creadas autom√°ticamente');",
                      "console.log('   ‚Ä¢ Historial de cambios registrado');",
                      "console.log('   ‚Ä¢ API Gateway funcionando correctamente');"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
