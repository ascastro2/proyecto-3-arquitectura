// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Medico {
  id              Int      @id @default(autoincrement())
  matricula       String   @unique
  nombre          String
  apellido        String
  especialidad    String
  email           String   @unique
  telefono        String
  fechaNacimiento DateTime
  direccion       String?
  activo          Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  // Relación con disponibilidad
  disponibilidades Disponibilidad[]

  @@map("medicos")
}

model Disponibilidad {
  id         Int      @id @default(autoincrement())
  medicoId   Int
  diaSemana  Int // 0=Domingo, 1=Lunes, ..., 6=Sábado
  horaInicio String // Formato HH:MM
  horaFin    String // Formato HH:MM
  activo     Boolean  @default(true)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Relación con médico
  medico Medico @relation(fields: [medicoId], references: [id], onDelete: Cascade)

  @@map("disponibilidades")
}
